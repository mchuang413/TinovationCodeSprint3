<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Overview</title>
        <link rel="shortcut icon" type="image/x-icon" href="assets/favicon.png" />
        <link rel="stylesheet" href="css/overview.css">

    </head>
    <body>
            <!-- Navbar -->
        <h1 id="username">Username</h1>
       
        <div class="main-content">
            <div id="diamonds"">Diamonds: 0</div>
            Goals:
            <div class="goal-container" id="goalContainer"></div>
            <div class="goal-input">
                <input type="text" id="goalInput" placeholder="Enter your goal">
                <button id="addGoalButton">Add Goal</button>
            </div>
        </div>
        <button onclick="redirectPayment()">eeeeee</button>

        <script src="script.js"></script>
        <script>
            //update username and goals from db
            window.onload = async function() {
                await setUsername();
                await setGoals();
                await setDiamonds();
            };


            const addGoalButton = document.getElementById("addGoalButton");
            const goalContainer = document.getElementById("goalContainer");
            const goalInput = document.getElementById("goalInput");

            //add goal to db + list
            addGoalButton.addEventListener("click", function() {
                const text = goalInput.value.trim();
                if (text) {
                    addGoal(text);
                    const goalBox = document.createElement("div");
                    goalBox.className = "goal-box";
                    goalBox.textContent = text;

                    const goalLink = document.createElement("a");
                    goalLink.href = `/dashboard.html?goal=${encodeURIComponent(text)}`;
                    goalLink.appendChild(goalBox);

                    goalContainer.appendChild(goalLink);
                    goalInput.value = "";
                }
            });
            
            function redirectPayment() {
                window.location.href='/payment.html'
            }

        </script>
    </body>
</html>
